DROP TABLE ACTIVITES_PRATIQUEES CASCADE CONSTRAINTS;
DROP TABLE CHARGE CASCADE CONSTRAINTS;
DROP TABLE RESULTATS CASCADE CONSTRAINTS;
DROP TABLE ACTIVITES CASCADE CONSTRAINTS;
DROP TABLE PROFESSEURS CASCADE CONSTRAINTS;
DROP TABLE COURS CASCADE CONSTRAINTS;
DROP TABLE ELEVES CASCADE CONSTRAINTS;

ALTER SESSION SET NLS_DATE_FORMAT = 'DD-MM-YYYY';

CREATE TABLE ELEVES(
    NUM_ELEVE       NUMBER (4),
    NOM             VARCHAR2(25),
    PRENOM          VARCHAR2(25),
    DATE_NAISSANCE  DATE,
    POIDS           NUMBER,
    ANNEE           NUMBER,
    SEXE            CHAR(1),
    CONSTRAINT PK_ELEVES                PRIMARY KEY(NUM_ELEVE),
    CONSTRAINT NN_ELEVE_NOM             CHECK(NOM IS NOT NULL),
    CONSTRAINT NN_ELEVE_PRENOM          CHECK(PRENOM IS NOT NULL) ,
    CONSTRAINT ck_etudiants_sexe        CHECK(SEXE IN ('M', 'm', 'F', 'f', NULL))
);

CREATE TABLE COURS(
    NUM_COURS       NUMBER(2),
    NOM             VARCHAR2(20),
    NBHEURES        NUMBER(2),
    ANNEE           NUMBER(1),
    CONSTRAINT PK_COURS                 PRIMARY KEY(NUM_COURS),
    CONSTRAINT NN_COURS_NOM             CHECK(NOM IS NOT NULL)
);

CREATE TABLE PROFESSEURS(
    NUM_PROF        NUMBER(4),
    NOM             VARCHAR2(25),
    SPECIALITE      VARCHAR2(20),
    DATE_ENTREE     DATE,
    DER_PROM        DATE,
    SALAIRE_BASE    NUMBER,
    SALAIRE_ACTUEL  NUMBER,
    CONSTRAINT PK_PROFESSEURS           PRIMARY KEY(NUM_PROF),
    CONSTRAINT NN_PROFESSEURS_NOM       CHECK(NOM IS NOT NULL),
    CONSTRAINT ck_professeurs_salaire CHECK(SALAIRE_BASE<=SALAIRE_ACTUEL)
);

CREATE TABLE ACTIVITES(
    NIVEAU          NUMBER(1),
    NOM             VARCHAR2(20),
    EQUIPE          VARCHAR2(32),
    CONSTRAINT PK_ACTIVITES             PRIMARY KEY(NIVEAU, NOM)
);

CREATE TABLE RESULTATS(
    NUM_ELEVE       NUMBER(4),
    NUM_COURS       NUMBER(4),
    POINTS          NUMBER,
    CONSTRAINT PK_RESULTATS             PRIMARY KEY(NUM_ELEVE, NUM_COURS),
    CONSTRAINT ck_resultats_notes       CHECK(POINTS BETWEEN 0 AND 20)
);

CREATE TABLE CHARGE(
    NUM_PROF        NUMBER(4) NOT NULL,
    NUM_COURS       NUMBER(4) NOT NULL,
    CONSTRAINT PK_CHARGE                PRIMARY KEY(NUM_COURS, NUM_PROF)
);


CREATE TABLE ACTIVITES_PRATIQUEES(
    NUM_ELEVE       NUMBER(4),
    NIVEAU          NUMBER(1),
    NOM             VARCHAR2(20),
    CONSTRAINT PK_ACTIVITES_PRATIQUEES  PRIMARY KEY(NUM_ELEVE, NIVEAU, NOM)
);




